<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Παζλ Ταυτοτήτων</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="stylemenu.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <script type="text/javascript" async
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
    <style>
        /* Εδώ διατηρούνται τα styles σου */
    </style>
</head>
<body>
    <header id="header">
        Παζλ Ταυτοτήτων
    </header>

    <h3>Σύρε τις παραστάσεις στο σωστό αναπτυγμένο αποτέλεσμα.</h3>
    
    <div class="container">
        <div class="column" id="expressions-column">
            <p><strong>Παραστάσεις</strong></p>
            <!-- Παραστάσεις θα γεμιστούν από το JS -->
        </div>
        
        <div class="column" id="expansions-column">
            <p><strong>Αναπτύγματα</strong></p>
            <!-- Αναπτύγματα θα γεμιστούν από το JS -->
        </div>
    </div>
    
    <button id="check-button">Έλεγχος Απαντήσεων</button>
    <button id="reset-button">Επαναφορά</button>
    <p id="result"></p>

    <footer id="footer">
        <p>© 2025 Created by Παρα-school-ακης</p>
    </footer>

    <script>
        // Αρχικοποίηση
        const dropzones = document.querySelectorAll('.dropzone');
        const checkButton = document.getElementById('check-button');
        const resetButton = document.getElementById('reset-button');
        const resultText = document.getElementById('result');
        const expressionsColumn = document.getElementById('expressions-column');
        const expansionsColumn = document.getElementById('expansions-column');

        // Συνάρτηση για δημιουργία τυχαίων αριθμών
        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Δημιουργία των παραστάσεων
        function generateExpressions() {
            const aValues = [1, 2, 3, 4, 5]; // Τιμές του α
            const expressions = [
                `(x + a)^2`, 
                `(x - a)^2`, 
                `(x + a)^3`, 
                `(x - a)^3`, 
                `(x - a)(x + a)`
            ];
            const expansions = [
                `x^2 + 2ax + a^2`,
                `x^2 - 2ax + a^2`,
                `x^3 + 3ax^2 + 3a^2x + a^3`,
                `x^3 - 3ax^2 + 3a^2x - a^3`,
                `x^2 - a^2`
            ];

            const generatedExpressions = [];
            const generatedExpansions = [];
            let correctMapping = [];

            for (let i = 0; i < 5; i++) {
                let a = aValues[i];
                let expression = expressions[i].replace(/a/g, a);
                let expansion = expansions[i].replace(/a/g, a);

                generatedExpressions.push({ expression, id: `piece${i+1}` });
                generatedExpansions.push({ expansion, correctPieceId: `piece${i+1}` });
            }

            // Ανακατεύουμε τα αναπτύγματα
            generatedExpansions.sort(() => Math.random() - 0.5);
            
            // Γέμισμα της στήλης παραστάσεων
            generatedExpressions.forEach((exp, index) => {
                const piece = document.createElement('div');
                piece.classList.add('piece');
                piece.id = exp.id;
                piece.draggable = true;
                piece.innerHTML = exp.expression;
                expressionsColumn.appendChild(piece);
            });

            // Γέμισμα της στήλης αναπτύγματος
            generatedExpansions.forEach((exp, index) => {
                const box = document.createElement('div');
                box.classList.add('dropzone');
                box.dataset.correct = exp.correctPieceId;
                box.innerHTML = exp.expansion;
                expansionsColumn.appendChild(box);
            });
        }

        // Αρχικοποίηση των παραστάσεων και αναπτύγματων
        generateExpressions();

        // Επαναφορά
        resetButton.addEventListener('click', () => {
            dropzones.forEach(dropzone => {
                dropzone.classList.remove('correct', 'incorrect');
                const piece = dropzone.querySelector('.piece');
                if (piece) {
                    expressionsColumn.appendChild(piece);
                }
            });
            resultText.textContent = '';
            checkButton.disabled = false;
        });

        // Έλεγχος απαντήσεων
        checkButton.addEventListener('click', () => {
            let score = 0;
            dropzones.forEach(dropzone => {
                const correctPieceId = dropzone.dataset.correct;
                const droppedPiece = dropzone.querySelector('.piece');
                if (droppedPiece && droppedPiece.id === correctPieceId) {
                    dropzone.classList.add('correct');
                    dropzone.classList.remove('incorrect');
                    score++;
                } else {
                    dropzone.classList.add('incorrect');
                    dropzone.classList.remove('correct');
                }
            });
            resultText.textContent = `Βαθμολογία: ${score}/${dropzones.length}`;
            checkButton.disabled = true;
        });
    </script>
</body>
</html>
